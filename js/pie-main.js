define("Util",[],function(){return{getId:function(e){return document.getElementById(e)},createCanvas:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.innerHTML="THIS IS A CANVAS ELEMENT",e.box.appendChild(t),t},getCtx:function(e){return e.getContext("2d")},copy:function(e,t){for(var n in t)e[n]=t[n]}}}),define("pie",["Util"],function(e){function n(n,r){this.data=n,this.dLen=n.length,this.totalValue=0,this.radius=0,this.startAngle=0,this.fontBackAngle=0,e.copy(t,r),this.init()}var t={width:400,height:300,box:null};return n.prototype={constructor:n,init:function(){var e=this;e.setCanvas(),e.compute(),e.computeRadius(),e.drawChart()},setCanvas:function(){var n=this,r=e.createCanvas(t);n.ctx=e.getCtx(r)},compute:function(){var e=this;for(var t=0;t<e.dLen;t++)e.totalValue+=e.data[t].value},computeRadius:function(){var e=this;t.width>t.height?e.radius=t.height/2-20:e.radius=t.width/2-20},drawChart:function(){var e=this;e.ctx.save(),e.ctx.strokeStyle="#000",e.ctx.lineWidth=1,e.ctx.translate(t.width/2,t.height/2);for(var n=0;n<e.dLen;n++)e.drawItem(e.data[n]);e.ctx.restore()},drawItem:function(e){var t=this,n=2*Math.PI*e.value/t.totalValue;t.ctx.save(),t.ctx.fillStyle=e.color,t.ctx.beginPath(),t.ctx.moveTo(0,0),t.ctx.lineTo(t.radius,0),t.ctx.arc(0,0,t.radius,t.startAngle,n),t.ctx.fill(),t.ctx.closePath(),t.ctx.restore(),t.ctx.rotate(n),t.fontBackAngle+=n,t.drawText(n,e.label+"("+e.value+")")},drawText:function(e,t){var n=this,r=n.radius*Math.cos(e/2)/2,i=n.radius*Math.sin(e/2)/2;n.ctx.save(),n.ctx.rotate(-e);var s=r*Math.cos(n.fontBackAngle)+i*Math.sin(n.fontBackAngle),o=r*Math.sin(n.fontBackAngle)+i*Math.cos(n.fontBackAngle);n.ctx.strokeStyle="#fff",n.ctx.font="12px",n.ctx.textAlign="center",n.ctx.fillText(t,r,i),n.ctx.rotate(-n.fontBackAngle),n.ctx.restore()}},n}),require.config({baseUrl:"../src/"}),require(["pie"],function(e){var t=new e(pieData,{box:document.getElementById("pieChart"),width:400,height:400})}),define("pie-main",function(){});